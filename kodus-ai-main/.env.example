# Environment
NODE_ENV=development

API_NODE_ENV=development
API_DATABASE_ENV=development
API_LOG_LEVEL=info
API_LOG_PRETTY=true
API_CLOUD_MODE=false # only set to true to use billing and analytics
API_DEVELOPMENT_MODE=false

# Server
GLOBAL_API_CONTAINER_NAME="kodus-orchestrator"
API_HOST=0.0.0.0
API_PORT=3001
API_WEBHOOKS_PORT=3332
API_RATE_MAX_REQUEST=100
API_RATE_INTERVAL=1000
API_URL=http://localhost:3001
API_FRONTEND_URL=http://localhost:3000
LOG_LEVEL=info
COMPONENT_TYPE=api
CI=false

# API Docs (Swagger/OpenAPI)
API_DOCS_ENABLED=false
API_DOCS_PATH=/docs
API_DOCS_SPEC_PATH=/openapi.json
API_DOCS_BASIC_USER=
API_DOCS_BASIC_PASS=
API_DOCS_SERVER_URLS=
API_DOCS_BASE_URL=

# Postgres
API_PG_DB_HOST=db_postgres
API_PG_DB_PORT=5432
API_PG_DB_USERNAME=kodusdev
API_PG_DB_PASSWORD=123456
API_PG_DB_DATABASE=kodus_db

# MongoDB
API_MG_DB_HOST=db_mongodb
API_MG_DB_PORT=27017
API_MG_DB_USERNAME=kodusdev
API_MG_DB_PASSWORD=123456
API_MG_DB_DATABASE=kodus_db
API_MG_DB_AUTH_SOURCE=
MONGODB_URI=

# Hability to API_NODE_ENV=production
API_MG_DB_PRODUCTION_CONFIG=''

API_RABBITMQ_ENABLED=true
RABBITMQ_DEFAULT_USER=dev
RABBITMQ_DEFAULT_PASS=devpass
RABBITMQ_HOSTNAME=rabbitmq-local
# Default for docker-compose (service name "rabbitmq")
API_RABBITMQ_URI=amqp://dev:devpass@rabbitmq-local:5672/kodus-ai?heartbeat=60
# If RabbitMQ is running outside docker (e.g. macOS host), use host.docker.internal
# API_RABBITMQ_URI=amqp://user:password@host.docker.internal:5672/?heartbeat=60
RABBITMQ_URI=

# Workflow Outbox
# How many times a message can be reclaimed + retried before becoming FAILED.
WORKFLOW_OUTBOX_MAX_ATTEMPTS=3
# Avoid infinite PROCESSING loops when broker connectivity is bad (0 disables timeout).
WORKFLOW_OUTBOX_PUBLISH_TIMEOUT_MS=15000

# OPENAI
API_OPEN_AI_API_KEY=

# JWT
API_JWT_EXPIRES_IN=365d
API_JWT_SECRET=
API_JWT_REFRESHSECRET=
API_JWT_REFRESH_EXPIRES_IN=365d

# GITHUB
GLOBAL_GITHUB_CLIENT_ID=
API_GITHUB_CLIENT_SECRET=
API_GITHUB_PRIVATE_KEY=
API_GITHUB_CODE_MANAGEMENT_WEBHOOK="http://localhost:3001/github/webhook"          # GitHub webhook URL (update with your API domain)
GITHUB_TOKEN=

# Optional - Only needed if using OAuth
API_GITHUB_APP_ID=                           # GitHub App ID
API_GITHUB_CLIENT_SECRET=                    # GitHub App Client Secret
API_GITHUB_PRIVATE_KEY=""                    # GitHub App Private Key
GLOBAL_GITHUB_CLIENT_ID=

# GITLAB
GLOBAL_GITLAB_CLIENT_ID=""
GLOBAL_GITLAB_CLIENT_SECRET=""
GLOBAL_GITLAB_REDIRECT_URL=""
API_GITLAB_TOKEN_URL=""
API_GITLAB_CODE_MANAGEMENT_WEBHOOK=http://localhost:3001/gitlab/webhook

LANGCHAIN_TRACING_V2=true
LANGCHAIN_ENDPOINT=https://api.smith.langchain.com
LANGCHAIN_API_KEY=
LANGCHAIN_PROJECT=kodus-orchestrator
LANGCHAIN_CALLBACKS_BACKGROUND=true

## CRON
API_CRON_SYNC_CODE_REVIEW_REACTIONS="0 0 * * *" # TODO DIA ÀS 00:00
API_CRON_KODY_LEARNING="0 0 * * 6" # TODO SÁBADO ÀS 00:00
API_CRON_CHECK_IF_PR_SHOULD_BE_APPROVED="*/2 * * * *" # A CADA 2 MINUTOS;

# MICROSERVICES
KODUS_SERVICE_TEAMS=
KODUS_SERVICE_AZURE_REPOS=

# EMAIL
API_MAILSEND_API_TOKEN=
API_USER_INVITE_BASE_URL=http://localhost:3000

# S3
API_AWS_REGION=us-east-1
API_AWS_USERNAME=
API_AWS_PASSWORD=
API_AWS_BUCKET_NAME_ASSISTANT=kodus-assistant-files

API_SENTRY_DNS=""
SENTRY_RELEASE=

# GEMINI
API_GOOGLE_AI_API_KEY=
GOOGLE_API_KEY=
GEMINI_API_KEY=
GEMINI_MODEL=gemini-1.5-flash
GEMINI_TEMPERATURE=
GEMINI_MAX_TOKENS=
GEMINI_TOP_P=
GEMINI_TOP_K=

# ANTHROPIC
API_ANTHROPIC_API_KEY=

#N8N
API_SIGNUP_NOTIFICATION_WEBHOOK=

#CRYPTO
API_CRYPTO_KEY=

#SEGMENT
API_SEGMENT_KEY=

# GOOGLE
API_GOOGLE_CLIENT_ID=
API_GOOGLE_CLIENT_SECRET=

# VERTEX AI
# Service Account JSON in base64: cat service-account.json | base64 -w 0
API_VERTEX_AI_API_KEY=
# Vertex AI location/region (default: us-central1)
API_VERTEX_AI_LOCATION=us-central1

# NOVITA AI
API_NOVITA_AI_API_KEY=

# GROQ
API_GROQ_BASE_URL=https://api.groq.com/openai/v1
API_GROQ_API_KEY=

# CEREBRAS
API_CEREBRAS_BASE_URL=https://api.cerebras.ai/v1
API_CEREBRAS_API_KEY=

# LLM Models
API_LLM_PROVIDER_MODEL="auto"
API_OPENAI_FORCE_BASE_URL=""

# BITBUCKET
GLOBAL_BITBUCKET_CODE_MANAGEMENT_WEBHOOK=http://localhost:3001/bitbucket/webhook

API_ENABLE_CODE_REVIEW_AST=false
API_MCP_SERVER_ENABLED=true

# AZURE REPOS
GLOBAL_AZURE_REPOS_CODE_MANAGEMENT_WEBHOOK=http://localhost:3001/azure-repos/webhook

# FORGEJO
API_FORGEJO_CODE_MANAGEMENT_WEBHOOK=http://localhost:3001/forgejo/webhook

# CODE MANAGEMENT WEBHOOK TOKEN
CODE_MANAGEMENT_SECRET=""
CODE_MANAGEMENT_WEBHOOK_TOKEN=""

# SERVICES
API_SERVICE_AST_URL="localhost:3002"
API_KODUS_SERVICE_MCP_MANAGER="localhost:3101"
API_KODUS_MCP_SERVER_URL=http://localhost:3001/mcp
GLOBAL_KODUS_SERVICE_BILLING=

# POSTHOG
API_POSTHOG_KEY=

# OPENROUTER
API_OPENROUTER_KEY=
API_OPEN_ROUTER_API_KEY=

# ECS Task Protection
API_ECS_AGENT_URI=http://localhost:5000
API_WORKER_DRAIN_TIMEOUT_MS=600000

# MORPHLLM
API_MORPHLLM_API_KEY=

# BetterStack Incident Management
API_BETTERSTACK_API_TOKEN=""
API_BETTERSTACK_HEARTBEAT_ERROR_RATE_URL=""
API_BETTERSTACK_HEARTBEAT_REVIEW_MONITOR_URL=""
API_BETTERSTACK_HEARTBEAT_OUTBOX_URL=""
API_BETTERSTACK_HEARTBEAT_WEBHOOK_URL=""

# Observability Metrics Thresholds
METRICS_ERROR_RATE_THRESHOLD_PERCENT=10
METRICS_ERROR_RATE_CRITICAL_PERCENT=25
METRICS_ERROR_RATE_WINDOW_MINUTES=5
REVIEW_RESPONSE_AVG_THRESHOLD_MS=600000
REVIEW_RESPONSE_AVG_CRITICAL_MS=1200000
REVIEW_RESPONSE_P95_THRESHOLD_MS=600000
REVIEW_RESPONSE_P95_CRITICAL_MS=1200000

# Webhook Failure Monitor Thresholds
WEBHOOK_FAILURE_THRESHOLD_PERCENT=10
WEBHOOK_FAILURE_WINDOW_MINUTES=30

# E2B
E2B_API_KEY

# ============================================================
# Web Frontend
# ============================================================
WEB_NODE_ENV="self-hosted"
WEB_HOSTNAME_API="localhost"
WEB_PORT_API=3001
WEB_PORT=3000

# WEB AUTH
WEB_NEXTAUTH_SECRET=""
NEXTAUTH_URL="http://localhost:3000"

# GITHUB APP
WEB_GITHUB_INSTALL_URL=""
WEB_OAUTH_GITHUB_CLIENT_ID=""
WEB_OAUTH_GITHUB_CLIENT_SECRET=""

# GITLAB APP
WEB_GITLAB_SCOPES="read_api read_user read_repository"
WEB_GITLAB_OAUTH_URL="https://gitlab.com/oauth/authorize"
WEB_OAUTH_GITLAB_CLIENT_ID=""
WEB_OAUTH_GITLAB_CLIENT_SECRET=""

# BITBUCKET APP
WEB_BITBUCKET_INSTALL_URL=""

# ANALYTICS
GLOBAL_ANALYTICS_CONTAINER_NAME="kodus-service-analytics"
WEB_ANALYTICS_HOSTNAME=""
WEB_ANALYTICS_SECRET=""
WEB_PORT_ANALYTICS=3005

# BILLING
GLOBAL_BILLING_CONTAINER_NAME="kodus-service-billing"
WEB_HOSTNAME_BILLING="localhost"
WEB_PORT_BILLING=3992

# MCP MANAGER
GLOBAL_MCP_MANAGER_CONTAINER_NAME="kodus-mcp-manager"
WEB_HOSTNAME_MCP_MANAGER="localhost"
WEB_PORT_MCP_MANAGER=3101

# POSTHOG
WEB_POSTHOG_KEY=

# KODUS DOCS
WEB_TERMS_AND_CONDITIONS=""
WEB_TOKEN_DOCS_GITHUB=https://docs.kodus.io/how_to_use/en/code_review/general_config/github_pat
WEB_TOKEN_DOCS_GITLAB=https://docs.kodus.io/how_to_use/en/code_review/general_config/gitlab_pat
WEB_TOKEN_DOCS_BITBUCKET=https://docs.kodus.io/how_to_use/en/code_review/general_config/bitbucket_pat
WEB_TOKEN_DOCS_AZUREREPOS=https://docs.kodus.io/how_to_use/en/code_review/general_config/azure_devops_pat
WEB_RULE_FILES_DOCS="https://docs.kodus.io/how_to_use/en/code_review/configs/rules_file_detection"

# SUPPORT
WEB_SUPPORT_DOCS_URL="https://docs.kodus.io"
WEB_SUPPORT_DISCORD_INVITE_URL="https://discord.gg/QFzwwmNmdN"
WEB_SUPPORT_TALK_TO_FOUNDER_URL="https://cal.com/gabrielmalinosqui/30min"
